[pytest]
testpaths = .
python_files = test_*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto
asyncio_default_fixture_loop_scope = session
asyncio_default_test_loop_scope = session
markers =
    infrastructure: Infrastructure health checks
    auth: Authentication flow tests
    gateway: API Gateway routing tests
    ipam: IPAM module tests
    npm: NPM module tests
    stig: STIG module tests
    integration: Cross-module integration tests
    slow: Tests that take longer to execute
    frontend: Frontend UI tests (Playwright)
addopts = 
    -v
    --tb=short
    --strict-markers
    -ra
    --html=reports/api-test-report.html
    --self-contained-html
filterwarnings =
    ignore::DeprecationWarning
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S

[tool:pytest]
env =
    GATEWAY_URL=http://localhost:3000
    POSTGRES_HOST=localhost
    POSTGRES_PORT=5432
    POSTGRES_DB=netnynja
    POSTGRES_USER=netnynja
    REDIS_HOST=localhost
    REDIS_PORT=6379
    NATS_HOST=localhost
    NATS_PORT=4222
